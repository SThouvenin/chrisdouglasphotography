if (self.CavalryLogger) { CavalryLogger.start_js(["jWZHq"]); }

__d("AttachmentRelatedShareTimingConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({EVENT_DELAY:1e3,HIDE_DELAY:100});f.exports=h}),null);
__d("LEDExperimentEntryPoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE:"like",REACT:"react",COMMENT:"comment",ATTACHMENT:"attachment",NETEGO:"netego",COMPOSER_POST:"composer_post"})}),null);
__d("PageContextualRecommendationsTrigger",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DEBUG:"debug",FANNING:"fanning",NONE:"none",STORY_CLICK:"story_click",UFI:"ufi"})}),null);
__d("PubcontentFeedChainingInjectionUtils",["getViewportDimensions"],(function a(b,c,d,e,f,g){"use strict";var h=100,i={isEligibleToInject:function j(k){var l=k.getBoundingClientRect(),m=l.top,n=c("getViewportDimensions").withoutScrollbars(),o=n.height;return!(!!o&&(o-m)/o*100>h)}};f.exports=i}),null);
__d("XEventRelatedEventsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/events/async/related_events_pivot/",{event_id:{type:"Int",required:true},attachment_id:{type:"String"},trigger_action:{type:"String"}})}),null);
__d("XFeedAdsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/ads_chaining/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}})}),null);
__d("XFundraiserAttachmentPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/social_good/fundraiser/attachment_pivot/",{ft_id:{type:"String"}})}),null);
__d("XLEDFollowUpFeedUnitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/led/async/follow_up_feed_unit/",{ft_id:{type:"String"},story_id:{type:"String"},entry_point:{type:"Enum",required:true,enumType:1}})}),null);
__d("XPubcontentCommerceProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_product/",{attachment_id:{type:"String",required:true},product_id:{type:"Int",required:true}})}),null);
__d("XPubcontentFeedChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/feed_chaining/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true},is_home_request:{type:"Bool",defaultValue:false},trigger:{type:"String"},referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},only_qp_allowed:{type:"Bool",defaultValue:false},reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XPubcontentFeedCommentChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/comment_chaining/",{action_trigger:{type:"String",required:true},ft_id:{type:"String"},comment_string:{type:"String"}})}),null);
__d("XPubcontentGroupRelatedStoriesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/group_related_stories/",{post_id:{type:"Int",required:true},is_home_request:{type:"Bool",defaultValue:false}})}),null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/inline_story_pivot_chaining/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}})}),null);
__d("XPubcontentLocalNewsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/local_news_chaining/",{ft_id:{type:"String"},story_id:{type:"String"}})}),null);
__d("XPubcontentPoliticalIssueChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/political_issue_chaining/",{ft_id:{type:"String",required:true}})}),null);
__d("XPubcontentRelatedShareChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_share/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false},ft_id:{type:"String"}})}),null);
__d("XPubcontentRelatedVideoChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_video/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"},cursor:{type:"String"},entry_point:{type:"Enum",enumType:1}})}),null);
__d("XPubcontentTopicChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/topic_chaining/",{ft_id:{type:"String",required:true}})}),null);
__d("XRelatedGamesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/games/async/related_games/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}})}),null);
__d("XSearchRelatedPostsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/search/async/related_posts_pivot/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}})}),null);
__d("XShowsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/shows_chaining/",{page_id:{type:"Int",required:true},story_id:{type:"String",required:true}})}),null);
__d("XSpokespersonProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spokesperson/related_product/",{ft_id:{type:"String"},reaction_type:{type:"Enum",enumType:0}})}),null);
__d("PubcontentFeedChainingControllerX",["csx","cx","AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentIssueDiversityShareConstants","AttachmentRelatedShareConstants","AttachmentRelatedShareTimingConstants","ContextualRecommendationsFeedChainingConfig","ContextualThing","CSS","DataAttributeUtils","DOM","DOMQuery","Event","FeedAdsChainingConfig","LEDExperimentEntryPoint","LitestandMessages","NavigationMessage","PageContextualRecommendationsTrigger","PageLikeConstants","Parent","PubcontentFeedChainingConfig","PubcontentFeedChainingInjectionUtils","PubcontentLocalNewsChainingConfig","PubcontentPoliticalIssueChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","RelatedEventsPivotChainingConfig","Run","SearchRelatedPostsPivotChainingConfig","StoryInlinePivotChainingConfig","SubscriptionsHandler","UFIFeedbackTargets","UFIUIEvents","URI","VideoChannelViewVariables","XEventRelatedEventsPivotController","XFeedAdsChainingController","XFundraiserAttachmentPivotController","XLEDFollowUpFeedUnitController","XPubcontentCommerceProductChainingController","XPubcontentFeedChainingController","XPubcontentFeedCommentChainingController","XPubcontentGroupRelatedStoriesChainingController","XPubcontentInlineStoryPivotChainingController","XPubcontentLocalNewsChainingController","XPubcontentPoliticalIssueChainingController","XPubcontentRelatedShareChainingController","XPubcontentRelatedVideoChainingController","XPubcontentTopicChainingController","XRelatedGamesChainingController","XSearchRelatedPostsPivotController","XShowsChainingController","XSpokespersonProductChainingController","cxodecode","getOrCreateDOMID"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="ei",k="ad_fan_page_action",l="ad_like_page_post_action",m="page_story_like_action",n="political_issue_story_article_click_action",o="local_news_story_article_click_action",p="related_share_article_click",q="related_product_click",r="related_share_video_click",s="related_share_video_view",t="page_share_like_action",u="topic_story_like_action",v="story_click_for_pivot_action",w="story_like_pivot_action",x="event_join",y="composer_publish_action",z="place_checkin_story_action",A="LIKE",B="COMMENT",C=500,D="SHOW_PAGE_FOLLOW",E=c("VideoChannelViewVariables").channelPivots,F="._5v9_",G=null,H=false,I=null,J=null;K.init=function(O){__p&&__p();var P=O.isLazy,Q=O.srs,R=O.sdrs;if(Q&&R){I=c("cxodecode")(Q);J=c("cxodecode")(R)}if(!G)G=new K({isLazy:P});if(!H){c("Run").onLeave(K.cleanup);c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,K.cleanup);H=true}};K.cleanup=function(){if(G){G.cleanup();G=null}};function K(O){__p&&__p();var P=O.isLazy;this.$PubcontentFeedChainingControllerX1=c("PubcontentFeedChainingConfig");this.$PubcontentFeedChainingControllerX2=c("ContextualRecommendationsFeedChainingConfig");this.$PubcontentFeedChainingControllerX3=c("FeedAdsChainingConfig");this.$PubcontentFeedChainingControllerX4=c("PubcontentRelatedShareChainingConfig");this.$PubcontentFeedChainingControllerX5=c("PubcontentTopicChainingConfig");this.$PubcontentFeedChainingControllerX6=c("PubcontentPoliticalIssueChainingConfig");this.$PubcontentFeedChainingControllerX7=c("StoryInlinePivotChainingConfig");this.$PubcontentFeedChainingControllerX8=c("RelatedEventsPivotChainingConfig");this.$PubcontentFeedChainingControllerX9=c("SearchRelatedPostsPivotChainingConfig");this.$PubcontentFeedChainingControllerX10=c("PubcontentLocalNewsChainingConfig");this.$PubcontentFeedChainingControllerX11={};this.$PubcontentFeedChainingControllerX12=null;this.$PubcontentFeedChainingControllerX13=new(c("SubscriptionsHandler"))();this.$PubcontentFeedChainingControllerX13.addSubscriptions(this.$PubcontentFeedChainingControllerX14(c("PageLikeConstants").LIKED,P,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").ActionLinkLike,P,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX17.bind(this))),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").ReactionButtonClicked,P,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX17.bind(this))),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").Comment,P,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX18.bind(this))),this.$PubcontentFeedChainingControllerX14("composer/publish",P,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX14("LitestandComposer/publish",P,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").ARTICLE_CLICK,P,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX20.bind(this))),this.$PubcontentFeedChainingControllerX14(c("AttachmentIssueDiversityShareConstants").ARTICLE_CLICK,P,this.$PubcontentFeedChainingControllerX21.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").VIDEO_CLICK,P,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX23.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").FBVIDEO_VIEW,P,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX24.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").FBVIDEO_CLICK,P,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX24.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").GAME_CLICK,P,this.$PubcontentFeedChainingControllerX25.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").PHOTO_CLICK,P,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX26.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").EVENT_JOIN,P,this.$PubcontentFeedChainingControllerX27.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").PRODUCT_CLICK,P,this.$PubcontentFeedChainingControllerX28.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").MAP_CLICK,P,this.$PubcontentFeedChainingControllerX29.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").ACTION_BUTTON_CLICK,P,this.$PubcontentFeedChainingControllerX30.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").SHOW_FOLLOW_CLICK,P,this.$PubcontentFeedChainingControllerX31.bind(this)))}K.prototype.$PubcontentFeedChainingControllerX14=function(event,O,P){var Q=O?[event,event+".lazy"]:[event];return c("Arbiter").subscribe(Q,P)};K.prototype.cleanup=function(){this.$PubcontentFeedChainingControllerX13&&this.$PubcontentFeedChainingControllerX13.release();this.$PubcontentFeedChainingControllerX13=null};K.getAdClientTokenIndex=function(){return j};K.prototype.$PubcontentFeedChainingControllerX15=function(O,P){var Q=this.findAdClientToken(P.target);if(Q)this.$PubcontentFeedChainingControllerX32(P.target,{origin:k,actor_id:P.profile_id,client_token:Q});else this.$PubcontentFeedChainingControllerX33(P.target,{origin:P.origin,actor_id:P.profile_id,trigger:c("PageContextualRecommendationsTrigger").FANNING,chaining_type:"contextual_recommendations",reaction_type:P.reaction_type})};K.prototype.$PubcontentFeedChainingControllerX31=function(O,P){var Q=P.attachment,R=P.pageID,S=P.storyID,T={origin:D},U=this.$PubcontentFeedChainingControllerX34(Q,T);if(!U||!U.story)return;var V=c("XShowsChainingController").getURIBuilder().setInt("page_id",R).setString("story_id",S);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,U.story.id)).setURI(V.getURI()).setRelativeTo(U.chainingWrapper).setAllowCrossPageTransition(true).send()};K.prototype.$PubcontentFeedChainingControllerX17=function(O,P){__p&&__p();if(!P.ft_id||!P.target||!P.reaction_type)return;if(!this.$PubcontentFeedChainingControllerX36(this.findStory(P.target))||this.$PubcontentFeedChainingControllerX37(this.findStory(P.target)))return;c("UFIFeedbackTargets").getFeedbackTarget(P.ft_id,function(Q,R){__p&&__p();this.$PubcontentFeedChainingControllerX38(Q,{ft_id:R.entidentifier,origin:A,in_place_pivot:true});var S=this.findAdClientToken(Q);if(S&&R.isshare)this.$PubcontentFeedChainingControllerX32(Q,{actor_id:R.actorid,origin:l,ft_id:R.entidentifier,client_token:S});else if(R.isActorFBEntity)this.$PubcontentFeedChainingControllerX39(Q,{ft_id:R.entidentifier,reaction_type:P.reaction_type,chaining_type:"contextual_recommendations",origin:A});else if(R.isownerpage){var T=R.isshare?t:m;this.$PubcontentFeedChainingControllerX33(Q,{actor_id:R.actorid,content_id:R.entidentifier,ft_id:R.entidentifier,origin:T,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:P.reaction_type})}else if(R.isshare)this.$PubcontentFeedChainingControllerX33(Q,{actor_id:R.actorid,content_id:R.entidentifier,ft_id:R.entidentifier,origin:t,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:P.reaction_type});else if(R.grouporeventid){if(this.shouldPuntGroupChaining(Q))return;this.$PubcontentFeedChainingControllerX40(Q,{post_id:R.entidentifier,origin:A})}else if(R.isownerfriend&&R.allowpivotqpsonfriendstory)this.$PubcontentFeedChainingControllerX33(Q,{actor_id:R.actorid,content_id:R.entidentifier,ft_id:R.entidentifier,origin:A,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:P.reaction_type,only_qp_allowed:true});else if(R.isplacecheckin)this.$PubcontentFeedChainingControllerX41(Q,{ft_id:R.entidentifier,origin:z},c("LEDExperimentEntryPoint").LIKE);else{var U=this.$PubcontentFeedChainingControllerX42(Q,{origin:w,ft_id:R.entidentifier});if(!U)this.$PubcontentFeedChainingControllerX43(Q,{origin:u,ft_id:R.entidentifier})}}.bind(this,P.target))};K.prototype.$PubcontentFeedChainingControllerX18=function(O,P){__p&&__p();if(!P.ft_id||!P.target)return;if(!this.$PubcontentFeedChainingControllerX36(this.findStory(P.target))||this.$PubcontentFeedChainingControllerX37(this.findStory(P.target)))return;c("UFIFeedbackTargets").getFeedbackTarget(P.ft_id,function(Q,R){this.$PubcontentFeedChainingControllerX38(Q,{ft_id:R.entidentifier,origin:B,in_place_pivot:true});if(R.grouporeventid){if(this.shouldPuntGroupChaining(Q))return;this.$PubcontentFeedChainingControllerX44(Q,{origin:B,event_id:R.grouporeventid})}else if(R.isplacecheckin)this.$PubcontentFeedChainingControllerX41(Q,{ft_id:R.entidentifier,origin:z},c("LEDExperimentEntryPoint").COMMENT);else this.$PubcontentFeedChainingControllerX45(P.target,{origin:p,action_trigger:B,ft_id:R.entidentifier,comment_string:P.commentString})}.bind(this,P.target))};K.prototype.$PubcontentFeedChainingControllerX42=function(O,P){__p&&__p();var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XPubcontentInlineStoryPivotChainingController").getURIBuilder().setString("origin",P.origin);if(P.story_id)R.setString("storyid",String(P.story_id));if(P.ft_id)R.setString("ftid",String(P.ft_id));new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX43=function(O,P){var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q||!this.$PubcontentFeedChainingControllerX46())return;var R=c("XPubcontentTopicChainingController").getURIBuilder().setString("ft_id",P.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return};K.prototype.$PubcontentFeedChainingControllerX47=function(O,P,Q,R){__p&&__p();var S=Q.ft_id;if(!S){R&&R();return}var T=this.findStory(P);if(M(T)||N(T)){R&&R();return}var U=this.$PubcontentFeedChainingControllerX34(P,Q);if(!U){R&&R();return}var V=O.getURIBuilder().setString("ft_id",S);new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX35(U.story.id);R&&R()}.bind(this)).setRelativeTo(U.chainingWrapper).setURI(V.getURI()).setAllowCrossPageTransition(true).setHandler(function(W){if(!W.payload.is_chained){this.$PubcontentFeedChainingControllerX35(U.story.id);R&&R()}}.bind(this)).send();return};K.prototype.$PubcontentFeedChainingControllerX26=function(O,P){var Q=this;Q.$PubcontentFeedChainingControllerX42(P.attachment,{origin:v,story_id:P.storyid})};K.prototype.$PubcontentFeedChainingControllerX20=function(O,P){this.$PubcontentFeedChainingControllerX48(O,P,true)};K.prototype.$PubcontentFeedChainingControllerX21=function(O,P){this.$PubcontentFeedChainingControllerX48(O,P,false)};K.prototype.$PubcontentFeedChainingControllerX48=function(O,P,Q){__p&&__p();if(c("AggregatedLinkComposerConfig").no_chained_related_stories==="true")return;var R=this,S=this.findStory(P.attachment),T=c("DOMQuery").scry(c("DOMQuery").getRootElement(),"#initial_browse_result").length>0;if(T)return;var U;if(P.is_right_click)U=0;else U=c("AttachmentRelatedShareTimingConstants").EVENT_DELAY;setTimeout(function(){__p&&__p();if(S){var V=R.findAttachment(S);if(V)P.attachment=V}P.ft_id=R.findFeedbackTargetId(S);R.$PubcontentFeedChainingControllerX47(c("XPubcontentPoliticalIssueChainingController"),P.attachment,{origin:n,ft_id:P.ft_id},function(){if(!Q)return;P.origin=p;R.$PubcontentFeedChainingControllerX49(P.attachment,P)})},U)};K.prototype.$PubcontentFeedChainingControllerX23=function(O,P){__p&&__p();if(!this.$PubcontentFeedChainingControllerX46())return;P.origin=r;var Q=this,R=this.findStory(P.attachment);setTimeout(function(){if(R){var S=Q.findAttachment(R);if(S)P.attachment=S}Q.$PubcontentFeedChainingControllerX49(P.attachment,P)},c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};K.prototype.$PubcontentFeedChainingControllerX24=function(O,P){__p&&__p();if(!this.$PubcontentFeedChainingControllerX46())return;P.origin=O.indexOf(c("AttachmentRelatedShareConstants").FBVIDEO_VIEW)===-1?r:s;var Q=this,R=this.findStory(P.attachment),S=function S(P){if(R){var T=Q.findAttachment(R);if(T)P.attachment=T}Q.$PubcontentFeedChainingControllerX49(P.attachment,P)};if(P.in_smooth_injection_experiment)S(P);else setTimeout(S.bind(this,P),c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};K.prototype.$PubcontentFeedChainingControllerX25=function(O,P){var Q=this,R=this.findStory(P.attachment);setTimeout(function(){if(R)var S=Q.findContainer(R);Q.$PubcontentFeedChainingControllerX50(R,P.global_share_id,c("getOrCreateDOMID")(S))},c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};K.prototype.$PubcontentFeedChainingControllerX27=function(O,P){var Q=this.findStory(P.attachment);if(Q){var R=this.findAttachment(Q);if(R)P.attachment=R}this.$PubcontentFeedChainingControllerX44(P.attachment,{origin:x,event_id:P.event_id})};K.prototype.$PubcontentFeedChainingControllerX28=function(O,P){P.origin=q;var Q=this.findStory(P.attachment);if(Q){var R=this.findAttachment(Q);if(R)P.attachment=R}this.$PubcontentFeedChainingControllerX51(P.attachment,P)};K.prototype.$PubcontentFeedChainingControllerX29=function(O,P){this.$PubcontentFeedChainingControllerX41(P.attachment,{story_id:P.story_id,origin:z},c("LEDExperimentEntryPoint").ATTACHMENT)};K.prototype.$PubcontentFeedChainingControllerX30=function(O,P){var Q=this.findStory(P.button);if(!Q)return;this.$PubcontentFeedChainingControllerX41(Q,{story_id:P.story_id,origin:z},c("LEDExperimentEntryPoint").ATTACHMENT)};K.prototype.$PubcontentFeedChainingControllerX19=function(O,P){var Q=this;setTimeout(function(){Q.$PubcontentFeedChainingControllerX52(P.markup.firstChild,{origin:y,content_id:P.content_id})},this.$PubcontentFeedChainingControllerX9.composer_publish_action)};K.prototype.$PubcontentFeedChainingControllerX53=function(O){return!!(O&&O.id&&!c("CSS").matchesSelector(O,"._sf6")&&!(O.id in this.$PubcontentFeedChainingControllerX11)&&!c("DOM").scry(O,"._4nre")[0])};K.prototype.$PubcontentFeedChainingControllerX54=function(O){if(!O)return false;if(O.origin in this.$PubcontentFeedChainingControllerX1||O.origin in this.$PubcontentFeedChainingControllerX2||O.origin in this.$PubcontentFeedChainingControllerX4||O.origin in this.$PubcontentFeedChainingControllerX3||O.origin in this.$PubcontentFeedChainingControllerX7||O.origin in this.$PubcontentFeedChainingControllerX8||O.origin in this.$PubcontentFeedChainingControllerX9||O.origin in this.$PubcontentFeedChainingControllerX5||O.origin in this.$PubcontentFeedChainingControllerX6||O.origin in this.$PubcontentFeedChainingControllerX10||O.origin===q||O.origin===s||O.origin===z||O.origin===A||O.origin===B||O.origin===D)return true;return false};K.prototype.$PubcontentFeedChainingControllerX55=function(O){this.$PubcontentFeedChainingControllerX11[O]=true};K.prototype.$PubcontentFeedChainingControllerX35=function(O){delete this.$PubcontentFeedChainingControllerX11[O]};K.prototype.$PubcontentFeedChainingControllerX36=function(O){__p&&__p();if(!O)return false;var P="_3lkn",Q=O.nextSibling,R=true;if(Q&&Q.firstChild){var S=Q.firstChild;R=!(S.hasChildNodes()&&c("CSS").hasClass(S,P))}if(!R)return false;var T=O.children[0],U=O.children[1],V="_4_ck";if(T&&c("CSS").hasClass(T,V)||U&&c("CSS").hasClass(U,V))return false;return true};K.prototype.$PubcontentFeedChainingControllerX37=function(O){if(!O)return true;var P=c("DOM").scry(O,"._1xwr");if(P.length)return true;return false};K.prototype.$PubcontentFeedChainingControllerX34=function(O,P){__p&&__p();var Q=this.findStory(O);if(!this.$PubcontentFeedChainingControllerX53(Q))return null;if(!this.$PubcontentFeedChainingControllerX54(P))return null;if(P.in_place_pivot)return{chainingWrapper:Q.firstChild,story:Q,is_auto_expand:P.is_auto_expand};this.$PubcontentFeedChainingControllerX55(Q.id);if(L(Q)&&P.chaining_type!=="contextual_recommendations")return null;var R;if(!P.continued_chaining){R=this.findContainer(Q);if(!R)return null;var S=c("DOM").create("div"),T=c("DOM").appendContent(R,S);if(T.length!==1)return null}else{R=Q;S=c("DOM").create("div");T=c("DOM").insertAfter(R,S);c("DOM").remove(R);if(T.length!==1)return null}if(P.is_auto_expand)return{chainingWrapper:T[0],story:Q,is_auto_expand:P.is_auto_expand};else return{chainingWrapper:T[0],story:Q}};K.prototype.$PubcontentFeedChainingControllerX32=function(O,P){__p&&__p();var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=this.findStreamRoot(Q.story);if(!R)return false;var S=R.getAttribute("id"),T=c("XFeedAdsChainingController").getURIBuilder().setString("actor_id",P.actor_id).setString("origin",P.origin).setString("ei",P.client_token).setString("data_ownerid",S);if(P.ft_id)T.setString("ft_id",P.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(T.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX49=function(O,P){__p&&__p();var Q,R=this;if(!this.$PubcontentFeedChainingControllerX36(this.findStory(O)))return false;var S=this.$PubcontentFeedChainingControllerX34(O,P);if(!S)return false;c("CSS").addClass(S.chainingWrapper,"_3lkn");var T=null;if(P.fbvideo_id){T=c("XPubcontentRelatedVideoChainingController").getURIBuilder();T.setInt("fbvideo_id",P.fbvideo_id)}else{T=c("XPubcontentRelatedShareChainingController").getURIBuilder();T.setInt("global_share_id",P.global_share_id)}T.setString("attachment_div_id",c("getOrCreateDOMID")(P.attachment));if(P.ft_id)T.setString("ft_id",P.ft_id);if(P.link_url)T.setString("link_url",P.link_url);if(P.video_div_id)T.setString("video_div_id",P.video_div_id);if(P.share_id)T.setString("share_id",P.share_id);var U=JSON.parse(c("DataAttributeUtils").getDataFt(S.story))||{};if("qid"in U&&"mf_story_key"in U){T.setString("qid",U.qid);T.setString("mf_story_key",U.mf_story_key)}if(P.is_auto_expand){this.$PubcontentFeedChainingControllerX35(S.story.id);T.setBool("is_auto_expand",P.is_auto_expand)}var V=new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,S.story.id)).setRelativeTo(S.chainingWrapper).setAllowCrossPageTransition(true).setURI(T.getURI());U&&V.setData(U);if(P.in_smooth_injection_experiment)(function(){__p&&__p();var W=null,X=c("Event").listen(window,"scroll",function(){this.$PubcontentFeedChainingControllerX56=true;if(W!==null)clearTimeout(W);W=setTimeout(function(){this.$PubcontentFeedChainingControllerX56=false;this.$PubcontentFeedChainingControllerX12&&this.$PubcontentFeedChainingControllerX12();this.$PubcontentFeedChainingControllerX12=null}.bind(this),C)}.bind(R));c("CSS").hide(S.chainingWrapper);V.setHandler(function(U){if(!this.$PubcontentFeedChainingControllerX56)this.$PubcontentFeedChainingControllerX57(O,S.chainingWrapper,X);else this.$PubcontentFeedChainingControllerX12=this.$PubcontentFeedChainingControllerX57.bind(this,O,S.chainingWrapper,X)}.bind(R))})();V.send();return true};K.prototype.$PubcontentFeedChainingControllerX50=function(O,P,Q){if(!this.$PubcontentFeedChainingControllerX53(O))return null;this.$PubcontentFeedChainingControllerX55(O.id);var R=c("XRelatedGamesChainingController").getURIBuilder().setInt("app_id",P).setString("attachment_div_id",Q);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,O.id)).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX33=function(O,P){__p&&__p();var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=this.findStory(O),S=c("XPubcontentFeedChainingController").getURIBuilder().setString("actor_id",P.actor_id).setString("origin",P.origin).setString("referrer",P.referrer).setString("trigger",P.trigger).setBool("is_home_request",this.$PubcontentFeedChainingControllerX46()).setBool("is_sponsored",L(R)).setEnum("reaction_type",P.reaction_type);if(P.ft_id)S.setString("ft_id",P.ft_id);if(P.content_id)S.setString("content_id",P.content_id);if(P.only_qp_allowed)S.setBool("only_qp_allowed",P.only_qp_allowed);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX44=function(O,P){var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XEventRelatedEventsPivotController").getURIBuilder().setInt("event_id",P.event_id).setString("attachment_id",c("getOrCreateDOMID")(O)).setString("trigger_action",P.origin).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX22=function(O,P){__p&&__p();return function(Q,R){__p&&__p();var S={origin:z};if(R.storyid)S.story_id=R.storyid;else{var T=this.findStory(R.attachment);if(!T)return O(Q,R);S.ft_id=this.findFeedbackTargetId(T)}return this.$PubcontentFeedChainingControllerX41(R.attachment,S,P,function(){return O(Q,R)})}.bind(this)};K.prototype.$PubcontentFeedChainingControllerX41=function(O,P,Q,R){__p&&__p();var S=c("XLEDFollowUpFeedUnitController").getURIBuilder().setEnum("entry_point",Q);if(P.ft_id)S=S.setString("ft_id",P.ft_id);if(P.story_id)S=S.setString("story_id",P.story_id);var T=this.$PubcontentFeedChainingControllerX34(O,P);if(!T){R&&R();return}new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX35(T.story.id);R&&R()}.bind(this)).setHandler(function(U){if(!U.payload.is_chained){this.$PubcontentFeedChainingControllerX35(T.story.id);R&&R()}}.bind(this)).setRelativeTo(T.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send()};K.prototype.$PubcontentFeedChainingControllerX16=function(O){__p&&__p();return function(P,Q){__p&&__p();var R=Q.attachment,S=Q.ft_id,T=Q.storyid;if(!R||!S&&!T){var U=void 0;if(R)U=this.findStory(Q.attachment);else if(Q.target)U=this.findStory(Q.target);if(U){if(!S)S=this.findFeedbackTargetId(U);if(!R)R=this.findAttachment(U)}}if(!R||!S&&!T)O(P,Q);this.$PubcontentFeedChainingControllerX58(R,{origin:o,ft_id:S,story_id:T},function(){return O(P,Q)})}.bind(this)};K.prototype.$PubcontentFeedChainingControllerX58=function(O,P,Q){__p&&__p();if(!P.ft_id&&!P.story_id)return false;var R=this.$PubcontentFeedChainingControllerX34(O,P);if(!R)return false;var S=c("XPubcontentLocalNewsChainingController").getURIBuilder();if(P.ft_id)S.setString("ft_id",P.ft_id);if(P.story_id)S.setString("story_id",P.story_id);new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX35(R.story.id);Q&&Q()}.bind(this)).setHandler(function(T){if(!T.payload.is_chained){this.$PubcontentFeedChainingControllerX35(R.story.id);Q&&Q()}}.bind(this)).setRelativeTo(R.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX39=function(O,P){var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XSpokespersonProductChainingController").getURIBuilder().setString("ft_id",P.ft_id).setEnum("reaction_type",P.reaction_type).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX51=function(O,P){var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XPubcontentCommerceProductChainingController").getURIBuilder().setString("attachment_id",c("getOrCreateDOMID")(O)).setInt("product_id",P.product_id).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX52=function(O,P){var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XSearchRelatedPostsPivotController").getURIBuilder().setString("origin",P.origin).setString("content_id",String(P.content_id));new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX45=function(O,P){__p&&__p();var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XPubcontentFeedCommentChainingController").getURIBuilder().setString("action_trigger",String(P.action_trigger));if(P.ft_id)R.setString("ft_id",P.ft_id);if(P.comment_string)R.setString("comment_string",P.comment_string);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX40=function(O,P){var Q=this.$PubcontentFeedChainingControllerX34(O,P);if(!Q)return false;var R=c("XPubcontentGroupRelatedStoriesChainingController").getURIBuilder().setInt("post_id",P.post_id).setBool("is_home_request",this.$PubcontentFeedChainingControllerX46()).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,Q.story.id)).setRelativeTo(Q.chainingWrapper).setURI(R).setAllowCrossPageTransition(true).send();return true};K.prototype.$PubcontentFeedChainingControllerX38=function(O,P){var Q=c("XFundraiserAttachmentPivotController").getURIBuilder();if(P.ft_id)Q=Q.setString("ft_id",P.ft_id);var R=this.$PubcontentFeedChainingControllerX34(O,P);if(!R)return;new(c("AsyncRequest"))().setRelativeTo(R.chainingWrapper).setURI(Q.getURI()).setAllowCrossPageTransition(true).send()};K.prototype.findStory=function(O){if(!O)return;var P="^div._3lb4",Q=c("DOM").scry(O,P);return Q.length===1?Q[0]:null};K.prototype.findFeedbackTargetId=function(O){__p&&__p();if(N(O)){var P=c("DOMQuery").scry(O,"input[name='ft_ent_identifier']"),Q=P.find(function(R){return!M(R)});if(!Q)return null;return Q.value}else if(E){var R=c("DOMQuery").scry(O,"input[name='ft_ent_identifier']")[0];if(!R)return null;return R.value}else{var S=c("DOMQuery").find(O,"input[name='ft_ent_identifier']");if(!S)return null;return S.value}};K.prototype.findAttachment=function(O){var P="div._6m2",Q="div.iframeEmbed",R=c("DOM").scry(O,P)[0]||c("DOM").scry(O,Q)[0];return R};K.prototype.findContainer=function(O){var P=c("DOM").create("div"),Q=c("DOM").insertAfter(O,P);c("ContextualThing").register(P,O);return Q.length>=1?Q[0]:null};K.prototype.findStreamRoot=function(O){var P="^div._4ikz";return c("DOM").scry(O,P)[0]};K.prototype.findAdClientToken=function(O){var P=this.findStory(O);if(!P)return null;var Q=c("DataAttributeUtils").getDataFt(P);if(!Q)return null;var R=JSON.parse(Q);return R[K.getAdClientTokenIndex()]};K.prototype.shouldPuntGroupChaining=function(O){var P="^._j_2";return c("DOM").scry(O,P).length>=1};K.prototype.$PubcontentFeedChainingControllerX46=function(){var O=c("URI").getRequestURI(false);return O.getPath()==="/"||O.getPath()==="/home.php"};K.prototype.$PubcontentFeedChainingControllerX57=function(O,P,Q){var R=c("PubcontentFeedChainingInjectionUtils").isEligibleToInject(O);if(R){c("CSS").show(P);c("Arbiter").inform(c("LitestandMessages").STORIES_INSERTED)}else c("DOM").empty(P);Q.remove()};function L(O){if(I&&J)return c("DOM").scry(O,I).length>0&&c("DOM").scry(O,J).length===0;else return c("DOM").scry(O,"._5paw").length>0&&c("DOM").scry(O,"._14zs").length===0}function M(O){return!!O&&(c("CSS").matchesSelector(O,F)||!!c("Parent").bySelector(O,F))}function N(O){return!!O&&c("DOM").scry(O,F).length>0}f.exports=K}),null);